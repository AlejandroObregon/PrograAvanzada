@model Pedidos.Abstracciones.ModelosParaUI.PedidoDto

@{
    ViewBag.Title = "Registrar Pedido";
}

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">

            <h2 class="mb-4">Registrar Pedido</h2>


            <div class="p-4 border rounded shadow-sm bg-light">

                <h4 class="mb-3">Datos del Pedido</h4>
                <hr />


                <div class="mb-3">
                    <label>Cliente Asociado:</label>
                    <div class="mb-3">
                        @Html.TextBoxFor(model => model.ClienteId, new { @class = "form-control" })
                    </div>
                </div>

                <div class="mb-3">
                    <label>Producto a Pedir:</label>
                    <div class="mb-3">
                        @Html.DropDownListFor(m => m.Productos,
                                        Model.Productos.Select(d => new SelectListItem()
                                        {
                                            Value = d.Id.ToString(),
                                            Text = d.Nombre
                                        }), new { @id = "Productos" })
                    </div>
                </div>

                @Html.TextBoxFor(model => model.ProductoId, new { @class = "form-control", style = "", @id = "idProducto" })
                @Html.TextBoxFor(model => model.Precio, new { @class = "form-control", style = "", @id = "precioProducto" })

                <div class="mb-3">
                    <label>Cantidad:</label>
                    <div class="mb-3">
                        @Html.TextBoxFor(model => model.Cantidad, new { @class = "form-control" })
                    </div>
                </div>

                <div class="mb-3">
                    <label>Subtotal:</label>
                    <div class="mb-3">
                        @Html.TextBoxFor(model => model.Subtotal, new { @class = "form-control", @disabled = "disabled", @id = "subtotalProducto" })
                    </div>
                </div>

                <div class="mb-3">
                    <label>Impuestos:</label>
                    <div class="mb-3">
                        @Html.TextBoxFor(model => model.Impuestos, new { @class = "form-control", @disabled = "disabled", @id = "impuestoProducto" })
                    </div>
                </div>

                <div class="mb-3">
                    <label>Total:</label>
                    <div class="mb-3">
                        @Html.TextBoxFor(model => model.Total, new { @class = "form-control", @disabled = "disabled", @id = "totalProducto" })
                    </div>
                </div>

                <div class="mb-3">
                    <label></label>
                </div>


                <div class="d-grid gap-2 mt-4">
                    <input type="submit" value="Crear Pedido" class="btn btn-primary btn-lg" />
                </div>
            </div>


            <div class="mt-3">
                @Html.ActionLink("Volver a la Lista", "ListarPedido", null, new { @class = "btn btn-secondary btn-sm" })
            </div>

        </div>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
<script>
    $(document).ready(function () {
        $('#Productos').click(function () {
            var id = $("#Productos").val();
            $("input[id=idProducto]").val(id);

            $.ajax({
                url: '/Producto/DetallesProducto',
                method: 'GET',
                data: { q: id, page: 2 }
            });
            $('#precioProducto').append(data);
        });
    });

</script>
}
